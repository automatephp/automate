repository: git@gitlab.eolas.fr:romaric.paul/trigger-automate.git
plugins:
    gitlab:
        uri: https://gitlab.eolas.fr
        variables:
            id_project: 302
            token_trigger: "4502af4576a877e020e383d9eeacbc"
            environment: "environment"
            ref: "master"
            deploy_successed_msg: "Big Up Bro!"
            deploy_failed_msg: "Shit!"

platforms:
    development:
        default_branch: master
        max_releases: 3
        servers:
            dddv-exemple-front-01:
                host: 10.66.236.233
                user: responsage
                password: Taef4que
                path: /home/wwwroot/responsage/romaricp
    production:
        default_branch: production
        servers:
            eddv-exemple-front-01:
                host: 12.9.9.1
                user: user
                password: %prod_password%
                path: /home/wwwroot/exemple
            eddv-exemple-front-02:
                host: 12.9.9.2
                user: user
                password: %prod_password%
                path: /home/wwwroot/exemple

shared_files:
    - app/config/parameters.yml

shared_folders:
    - app/data

pre_deploy:
    - "php -v"
#
#on_deploy:
#    - "composer install"
#    - "setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX var"
#    - "setfacl -dR -m u:www-data:rwX -m u:`whoami`:rwX var"
#
#post_deploy:
#    - "php bin/console doctrine:cache:clear-metadata"
#    - cmd: "php bin/console doctrine:schema:update --force"
#      only: eddv-exemple-front-01
#    - "php bin/console doctrine:cache:clear-result"